---

# DNS

forwarders:
  - 1.1.1.1
  - 8.8.8.8
  - 9.9.9.9
  - 9.9.9.10


allowed:
  - 192.168.42.0/24
  - 127.0.0.0/8
  - 172.17.0.0/16


domain: tay.vk 
zone: db.tay 


public_url: http://{{ ansible_host }}:{{ ansible_port//100}}80 
vm_hostname: "{{ inventory_hostname }}"
vm0: ketajebisashvili 
vm1: ketajebisashvili-1 
vm2: ketajebisashvili-2 
vm3: ketajebisashvili-3 


dns_a_records:
  backup: 192.168.42.132
  cloudfare: 1.1.1.1
  google: 8.8.8.8
  google2: 8.8.4.4


dns_cname_records:
  grafana: "{{ groups['grafana'][0] }}"
  influxdb: "{{ groups['influxdb'][0] }}"
  prometheus: "{{ groups['prometheus'][0] }}"
  web1: "{{ groups['web_servers'][0] }}"
  web2: "{{ groups['web_servers'][1] }}"
  lb1: "{{ groups['web_servers'][0] }}"
  lb2: "{{ groups['web_servers'][1] }}"
  mysql1: "{{ groups['db_servers'][0] }}"
  mysql2: "{{ groups['db_servers'][1] }}"
  ns1: "{{ groups['dns_servers'][0] }}"
  ns2: "{{ groups['dns_servers'][1] }}"
  ns3: "{{ groups['dns_servers'][2] }}"



# PORTS

backup_ip: 192.168.42.132
grafana_ip: 172.17.0.2
virtual_ip: 192.168.100
backup_ssh: ketajebisashvili@backup.tay.vk

grafana_port: 3001
agama_port: 8001
nginx_port: 8080
pinger_port: 8086
prometheus_port: 9090
influxdb_port: 8086
haproxy_port: 88

mysql_exporter_port: 9104
bind_exporter_port: 9119
node_exporter_port: 9100
nginx_exporter_port: 9113
influxdb_exporter_port: 9424
keepalived_exporter_port: 9165
haproxy_exporter_port: 9101

exporters:
  - endpoint: "mysql-metrics"
    port: 9104
    groups: "db_servers"
    name: mysql
  - endpoint: "bind-metrics"
    port: 9119
    groups: "dns_servers"
    name: ns
  - endpoint: "node-metrics"
    port: 9100
    groups: "all"
    name: ketajebisashvili-1
  - endpoint: "nginx-metrics"
    port: 9113
    groups: "nginx"
    name: web
  - endpoint: "keepalived-metrics"
    port: 9165
    groups: "keepalived"
    name: lb
  - endpoint: "haproxy-metrics"
    port: 9101
    groups: "haproxy"
    name: lb
  - endpoint: "influxdb-metrics"
    port: 9424
    groups: "influxdb"
    name: influxdb




# SORTING

node_id: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'].split('.')[-1] }}"

agama_container_per_vm: 2

keepalived_interface: ens3

keepalived_virtual_id: 13

keepalived_master_priority: 100

keepalived_slave_priority: 99

backup_server_ssh_key: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIBSne71MCp6CQCHURWe3CLud6vPDkLfL83Oab/giAI7O # Equals to key1 and key 2




# USERS

mysql_host: ketajebisashvili-2 

mysql_database: agama

mysql_user: agama

mysql_exporter_user: exporter

agama_user: agama

prometheus_user: prometheus

pinger_user: pinger

backup_user: backup

replication_user: replication




# PASS

mysql_user_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          66316663653366663837646361383137393431393932333839626133306261663132383864306261
          3564643766666537363866656435623261326236346133620a623232323935323537656635326463
          30376363323937626330336338346661313165353761656635363733353163613133646665333064
          3333653163316265310a623537316636323735633330323630663866633437313238343339633564
          3062

mysql_exporter_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35666431613761333534343133306464383534613065396436356263633039626565353962383232
          3534653030366335393534303861643738363433653137340a393264623935326563643133613030
          30643361376431386337346366383165333231633238366162363333636332393732346233613734
          3138656134653562620a313232376334646435323366366535363061666337333533313762396134
          3966

grafana_admin_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62663665393130323938396534363234393261343861393664646131373439313665663833343532
          3439306264376639376336393636333666613833326466300a313661356635646631363635613133
          30343036366634393839393336356261646436613637383238353736373330633961333731346139
          6362666237383633320a666232373035383161303339383838636661313165366361356161633163
          6666

backup_user_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39633834326534616533343337376633353433353532326533303963386266303938383830333463
          3363306138303666613935373264623434376166353862650a646361353239663561333966623031
          30653139353366656630666633376163646332656166653134626663623965393463396537613739
          3330663135306362320a356235666633323139313839303132643862613232323232386436343631
          3431

mysql_backup_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63633636663334316138383863646261343664616263323830336235656436376238353038373037
          3337386264363262366166323537353332306564356465360a343436346338386534326139346431
          61356133356263313464643836373364643037316530323534346166633030383431323337616439
          6330353264373762390a356164626561313362666561313332303834356234376333623231616364
          3563

replication_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39303262313332326434646364336363306537626438613336656161396161633231393433313962
          3461636238666438343662333765396163363036303765360a643639343030336661653462383531
          30323430376436326265633634316636323765333537376239653761333762376161386634313931
          3630303936646636390a336465323238306534323961643331363534616664613864323964316237
          3938


#dns keys

dns_transfer_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          38616630393537393338383932393462626137333837656331653935643563323165383638343130
          3835653434376564363466613463653363386338333335610a643131643936376330646131386337
          61376336663562646237663166346466373036343663646533616162343832633339323165363034
          3761306463373132620a636330663630326265616565656139656130393866313862613461326565
          38303635306638613832623130643566353966343832363762356133313266636237303439316131
          3435363138363861643733366664303236316639353538363431

dns_update_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39396366613866393434303134326138643333383163373731646663373065303365303435336565
          3232613830656532613437356138613131643562653835330a643362336263396664666131363735
          33666634616536323739393461366564396137363138363964303330316431313435653062323861
          6438383236333435660a383638356261373038626432636536656634316339643034333762356565
          62373231306365663866376261306361323536343165363561666263623132383766336238366332
          3139363762363534393232303761663766303635613934303330

#docker

docker_user: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          34316536386639653866636437303134643161333532646338643438346139316264313061623231
          3361346435643231396630623034623338666665356533620a613937386131656563346561393963
          64373732303138623337313363363062646166393932646530643132346361633830356530386531
          6339303164356332630a656537626133633731663965626261623162303166376162333065663239
          6536

docker_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65303234613331313564643734376237303430373231653566613066323932613839646237313536
          3737303938643538306530636339383831653838663236330a623536333739646364353231623830
          37633761383137303433333138393931613962636532313537373964616633343364386164313635
          3364623165323735390a643030616333643964636134323837623663333531633162663566323137
          6663
